{
    "name": "GET SERVER DETAILS",
    "interpreter": "bash",
    "notes": "Returns **hostname**, **distribution**, **uptime**, **number of cpus**, **load average**, **total memory**, and **ip addresses** in json format.",
    "content": "# Get hostname\r\nhostname=`hostname` 2> \/dev\/null\r\n \r\n# Get distro\r\nif [ -f \"\/etc\/system-release\" ]; then\r\n    distro=`cat \/etc\/system-release`\r\nelse\r\n    distro=`python -c 'import platform; print platform.linux_distribution()[0] + \" \" + platform.linux_distribution()[1]'` 2> \/dev\/null\r\nfi\r\n \r\n# Get uptime\r\nif [ -f \"\/proc\/uptime\" ]; then\r\n    uptime=`cat \/proc\/uptime`\r\n    uptime=${uptime%%.*}\r\n    seconds=$(( uptime%60 ))\r\n    minutes=$(( uptime\/60%60 ))\r\n    hours=$(( uptime\/60\/60%24 ))\r\n    days=$(( uptime\/60\/60\/24 ))\r\n    uptime=\"$days\"d\", $hours\"h\", $minutes\"m\", $seconds\"s\"\"\r\nelse\r\n    uptime=\"\"\r\nfi\r\n \r\n# Get cpus\r\nif [ -f \"\/proc\/cpuinfo\" ]; then\r\n    cpus=`grep -c processor \/proc\/cpuinfo` 2> \/dev\/null\r\nelse\r\n    cpus=\"\"\r\nfi\r\n \r\n# Get load averages\r\nloadavg=`uptime | awk -F'load average:' '{ print $2 }'` 2> \/dev\/null\r\n \r\n# Remove leading whitespace from load averages\r\nloadavg=`echo $loadavg | sed 's\/^ *\/\/g'`\r\n \r\n# Get total memory\r\nif [ -f \"\/proc\/meminfo\" ]; then\r\n    memory=`cat \/proc\/meminfo | grep 'MemTotal:' | awk {'print $2}'` 2> \/dev\/null\r\nelse\r\n    memory=\"\"\r\nfi\r\n \r\n# Get ip addresses\r\nips=`ifconfig | awk -F \"[: ]+\" '\/inet addr:\/ { if ($4 != \"127.0.0.1\") print $4 }'` 2> \/dev\/null\r\n \r\n# ips is empty, let's try and get ip addresses with python instead\r\nif [ -z \"${ips}\" ]; then\r\n    ips=`python -c 'import socket; print socket.gethostbyname(socket.gethostname())'` 2> \/dev\/null\r\nfi\r\n \r\necho -n '{\"hostname\": \"'$hostname'\", \"distro\": \"'$distro'\", \"uptime\": \"'$uptime'\", \"cpus\": '$cpus', \"loadavg\": \"'$loadavg'\", \"memory\": '$memory', \"ips\": \"'$ips'\"}'"
}
{
    "name": "UBUNTU WORDPRESS",
    "interpreter": "bash",
    "notes": "### Description\r\n\r\nInstalls and configures **Wordpress** running **Apache2** with **PHP 7.2** on **Ubuntu 16.04**. Also runs **MySQL Server**, which listens on localhost and creates a dedicated `mysql` user account with a default password of `CommandoWordpress`.\r\n\r\n### Wordpress MySQL Credentials\r\n\r\n**Database Name:** wordpress\r\n**Username:** wordpress\r\n**Password:** CommandoWordpress\r\n**Database Host:** localhost\r\n\r\n### Requirements\r\n\r\n- Ubuntu 16.04\r\n- Root account",
    "content": "if [[ $EUID -ne 0 ]]; then\r\n   echo \"this script must be run as root\" 1>&2;\r\n   exit 1\r\nfi\r\n\r\nif [ ! -e \/etc\/os-release ] || [ $(awk -F= '\/^NAME\/{print $2}' \/etc\/os-release) != '\"Ubuntu\"' ]; then\r\n  echo \"this script must be run on Ubuntu\" 1>&2;\r\n  exit 1\r\nfi\r\n\r\nexport DEBIAN_FRONTEND=noninteractive\r\nexport APT_LISTCHANGES_FRONTEND=none\r\n\r\napt-get update\r\napt -y autoremove\r\n\r\napt-get -y install mysql-server\r\nsystemctl enable mysql\r\n\r\nROOT_MYSQL_PASSWORD=$(LC_ALL=C tr -dc '[:alnum:]' < \/dev\/urandom | head -c16)\r\nmysqladmin flush-privileges\r\nmysqladmin password \"$ROOT_MYSQL_PASSWORD\"\r\n\r\nmysql --user root --host localhost --password=\"$ROOT_MYSQL_PASSWORD\" -e \"CREATE USER 'wordpress'@'localhost' IDENTIFIED BY 'CommandoWordpress'\";\r\nmysql --user root --host localhost --password=\"$ROOT_MYSQL_PASSWORD\" -e \"GRANT ALL PRIVILEGES ON * . * TO 'wordpress'@'localhost'\";\r\nmysql --user root --host localhost --password=\"$ROOT_MYSQL_PASSWORD\" -e \"FLUSH PRIVILEGES;\"\r\nmysql --user root --host localhost --password=\"$ROOT_MYSQL_PASSWORD\" -e \"CREATE DATABASE wordpress;\"\r\n\r\napt-get -y install software-properties-common python-software-properties apache2\r\nsystemctl enable apache2\r\n\r\nadd-apt-repository -y ppa:ondrej\/php\r\napt-get update\r\n\r\napt-get -y install libapache2-mod-php7.2\r\n\r\napt-get -y install php7.2-cli php7.2-common php7.2-curl \\\r\n                   php7.2-json php7.2-mbstring php7.2-mysql \\\r\n                   php7.2-intl php7.2-opcache php7.2-readline php7.2-soap \\\r\n                   php7.2-xml php7.2-zip php-gettext php-pear\r\n                                                                            \r\na2enmod rewrite\r\na2enmod headers\r\n\r\nwget https:\/\/wordpress.org\/latest.tar.gz -O \/var\/www\/html\/wordpress.tar.gz\r\ncd \/var\/www\/html\r\nrm -f index.html\r\ntar xf wordpress.tar.gz\r\nmv wordpress\/* .\r\nrm -f wordpress.tar.gz\r\ncd ..\/\r\nchown -R www-data:www-data html\r\n\r\nservice apache2 restart\r\n\r\nprintf \"\\n\\n\"\r\necho 'Wordpress MySQL Credentials                              '\r\necho '---------------------------------------------------------'\r\necho 'Database Name: wordpress                                 '\r\necho 'Username: wordpress                                      '\r\necho 'Password: CommandoWordpress                              '\r\necho 'Database Host: localhost                                 '\r\necho '---------------------------------------------------------'"
}